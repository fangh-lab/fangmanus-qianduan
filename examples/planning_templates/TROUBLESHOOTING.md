# 故障排除指南

## 常见问题

### 1. 为什么看不到浏览器打开？

**原因**：
- Agent 可能优先选择了 `web_search` 工具（轻量级，速度快）
- 任务描述不够明确，没有要求"访问网页"或"浏览网站"

**解决方案**：
- 在 Prompt 中明确要求："使用浏览器访问并探索 XXX 网站"
- 或者："打开浏览器，访问 XXX 网页，并提取信息"
- Agent 会根据任务描述选择合适的工具

### 2. 第一步结果为空怎么办？

**原因**：
- Agent 可能在思考阶段没有选择工具
- 或者工具执行失败但没有返回错误信息

**解决方案**：
- 检查事件日志中的 `error` 事件
- 查看 `step_end` 事件的完整内容（可能在事件日志中）
- 如果第一步只是思考没有执行，这是正常的，Agent 会在后续步骤中执行

### 3. 如果 10 步推理没完成，会返回什么？

**返回内容**：
- Agent 会返回**最后一步的执行结果**
- 同时包含**最后 3 步的执行摘要**
- 格式：`[执行了 X 步，当前结果]: ... [执行摘要]: ...`

**对第二步的影响**：
- 第二步会基于第一步返回的结果继续执行
- Planning Flow 会将第一步的结果传递给第二步的 Agent
- Agent 可以看到之前的执行历史和结果

### 4. 选择"不接受"后，1/2/3 选项不清楚？

**已修复**：
- 前端现在会显示清晰的选项说明：
  - `1 - 提供纠正/反馈（会记录到 notes/记忆）`
  - `2 - 标记该步骤为阻塞/需要重新执行`
  - `3 - 接受当前结果并继续（可选填写备注）`

### 5. 如何确保 Agent 使用浏览器工具？

**方法 1：明确指示**
```
使用 browser_use 工具访问 https://example.com 并提取信息
```

**方法 2：使用规划模板**
- 上传 `web_exploration_demo.txt` 作为 Planning Template
- 模板会引导 Agent 在需要时使用浏览器工具

**方法 3：在 Prompt 中强调**
```
请使用浏览器工具（browser_use）访问并探索网站，不要只使用搜索工具
```

## 性能优化建议

1. **减少步骤数**：如果任务简单，可以在 Planning Template 中要求更少的步骤
2. **明确工具选择**：在 Prompt 中明确指定需要的工具
3. **分阶段执行**：将复杂任务分解为多个简单任务，逐步完成

## 调试技巧

1. **查看事件日志**：在 Web UI 右侧查看所有事件，了解 Agent 的执行过程
2. **检查步骤结果**：在"当前步骤结果"框中查看每步的最终输出
3. **查看完整计划**：在"当前计划"框中查看整个执行计划
